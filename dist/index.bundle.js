(()=>{var e,n={5358:(e,n,t)=>{var o={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function a(e){var n=s(e);return t(n)}function s(e){if(!t.o(o,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=s,e.exports=a,a.id=5358},44:(e,n,t)=>{"use strict";var o=t(223),a=t(7594);(0,o.Wp)({apiKey:"AIzaSyDChyRMRZw13CIheI4_vd5bsrFLBprMC20",authDomain:"that-sky-calendar-ffd49.firebaseapp.com",projectId:"that-sky-calendar-ffd49",storageBucket:"that-sky-calendar-ffd49.appspot.com",messagingSenderId:"994867085966",appId:"1:994867085966:web:ea6d5b05bccb508eb73fdf",measurementId:"G-FXXSH6NS6Z"});const s=(0,a.aU)(),i=(0,a.rJ)(s,"events");(0,a.rJ)(s,"shards");let l=[],c={},r=0,d=[];function m(e){const n=new Date,t=new Date(e.start),o=new Date(e.end);let a="";a="Recurring"===e.category?`Every ${e.recurringInterval||"0:30"}`:n<t?function(e){const n=new Date,t=new Date(e)-n;if(t<=0)return"Started";const o=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5),s=Math.floor(t%36e5/6e4);return 0===o?`Starts in ${a}H ${s}M`:`Starts in ${o}D ${a}H ${s}M`}(t):n>=t&&n<=o?`Ends in: ${function(e){const n=new Date,t=new Date(e)-n;return t<=0?"Ended":`${Math.floor(t/864e5)}D ${Math.floor(t%864e5/36e5)}H`}(o)}`:"Event ended";const s=document.createElement("div");return s.className="event-card",s.dataset.eventId=e.id||u(e.title),s.innerHTML=`\n    <img src="${e.image||"https://ik.imagekit.io/e3wiv79bq/Sky:%20Cotl/not%20available?updatedAt=1744181831782"}" alt="${e.title}">\n    <div class="event-details">\n        <h3>${e.title.replace(/^[\p{Emoji}\p{Extended_Pictographic}]+\s*/u,"")}</h3>\n        <p>${function(e,n){const t=moment(e),o=moment(n);return t.month()===o.month()?`${t.format("MMM DD")} - ${o.format("DD")}`:`${t.format("MMM DD")} - ${o.format("MMM DD")}`}(e.start,e.end)}</p>\n        <p>${a}</p>\n    </div>\n    <div class="arrow">›</div>\n  `,s}function u(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"-")}function p(){const e=document.getElementById("prev-month"),n=document.getElementById("next-month");document.getElementById("current-month-year").textContent=d[r],e.disabled=0===r,n.disabled=r===d.length-1}function g(){const e=d[r],n=document.getElementById("all-events-content");n.innerHTML="";const t=document.createElement("div");t.className="month-divider",n.appendChild(t);const o=c[e]||[];if(0===o.length){const e=document.createElement("div");e.className="no-events",e.textContent="No events for this month",n.appendChild(e)}else o.forEach((e=>{const t=m(e);n.appendChild(t)}));x()}function h(){const e=new Date;!function(e,n,t){if(document.getElementById("in-progress").style.display="none",document.getElementById("upcoming").style.display="none",document.getElementById("all").style.display="none","all"===e)document.getElementById("all").style.display="block",c=function(e){const n={};return e.forEach((e=>{const t=new Date(e.start),o=moment(t).format("MMMM YYYY");n[o]||(n[o]=[]),n[o].push(e)})),n}(l),d=Object.keys(c).sort(((e,n)=>moment(e,"MMMM YYYY").diff(moment(n,"MMMM YYYY")))),r=function(e){const n=moment().format("MMMM YYYY"),t=e.indexOf(n);return-1!==t?t:0}(d),p(),g();else if("in-progress"===e){const e=document.getElementById("in-progress");e.style.display="block",e.innerHTML="",0===n.length?e.innerHTML='<div class="no-events">No events in progress</div>':n.forEach((n=>{const t=m(n);e.appendChild(t)})),x()}else if("upcoming"===e){const e=document.getElementById("upcoming");e.style.display="block",e.innerHTML="",0===t.length?e.innerHTML='<div class="no-events">No upcoming events</div>':t.forEach((n=>{const t=m(n);e.appendChild(t)})),x()}}(document.querySelector(".tab.active").dataset.tab,l.filter((n=>{const t=new Date(n.start),o=new Date(n.end);return e>=t&&e<=o})),l.filter((n=>{const t=new Date(n.start);return e<t})))}function v(e){const n=document.querySelector(".preview-panel");if(!n)return;if(!e)return void(n.innerHTML='<div class="loading">Select an event to view details</div>');const t=S(e.start)+" - "+S(e.end),o=e.title.replace(/^[\p{Emoji}\p{Extended_Pictographic}]+\s*/u,"");let a=e.category||"EVENT";a.toUpperCase().includes("DAY")?a="DAYS OF":a.toUpperCase().includes("SEASONS")?a="SEASON":a.toUpperCase().includes("TRAVELLING-SPIRITS")?a="TS":a.toUpperCase().includes("SPECIAL-EVENT")&&(a="SPECIAL");const s=function(e){let n=e.description||"Join us in Sky!";n.length>300&&(n=n.slice(0,300)+"..."),n=encodeURIComponent(n);const t=encodeURIComponent(e.title||"Sky Event"),o=encodeURIComponent("Sky: Children of the Light");return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${t}&dates=${new Date(e.start).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}/${new Date(e.end).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}&details=${n}&location=${o}`}(e),i=e.blogUrl?`<a id="modalCta" class="cta-btn" title="Sky Blog" href="${e.blogUrl}" target="_blank" rel="noopener noreferrer">\n      Read More\n    </a>`:"";n.innerHTML=`\n    <div class="carousel">\n      <div class="carousel-images-panel"></div>\n      <button class="carousel-btn-panel prev">❮</button>\n      <button class="carousel-btn-panel next">❯</button>\n    </div>\n    <div class="credits-section">\n      <span class="credits-list">Credits: ${e.credits||"Kathy"}</span>\n    </div>\n    <div class="days-badge">${a.toUpperCase()}</div>\n    <h2>${o}</h2>\n    <p class="date">${t}</p>\n    <p class="description">${e.description||"No description available"}</p>\n    <div class="modal-cta-container">\n      <a id="modalGoogleCalendar" class="cta-btn calendar-link-btn" title="Add to Google Calendar" href="${s}" rel="noopener noreferrer" target="_blank">\n        Add to Google Calendar\n      </a>\n      ${i}\n    </div>\n  `,function(e){const n=document.querySelector(".carousel-images-panel");if(e.images){const t="string"==typeof e.images&&e.images.includes(",")?e.images.split(/,|\|/).map((e=>e.trim())):Array.isArray(e.images)?e.images:[e.images];t.forEach(((t,o)=>{const a=document.createElement("div");a.className="image-container";const s=document.createElement("img");s.src=t,s.alt=`${e.title} image ${o+1}`,s.className=0===o?"active":"";const i=document.createElement("button");i.className="zoom-btn",i.innerHTML="⛶",i.title="Enlarge image",i.onclick=()=>y(t,s.alt),a.appendChild(s),a.appendChild(i),n.appendChild(a)})),document.querySelectorAll(".carousel-btn-panel").forEach((e=>{e.style.display=t.length>1?"block":"none"}))}else{const e=document.createElement("div");e.className="image-container";const t=document.createElement("img");t.src="https://ik.imagekit.io/e3wiv79bq/Sky:%20Cotl/not%20available?updatedAt=1744181831782",t.alt="Event placeholder image",t.className="active";const o=document.createElement("button");o.className="zoom-btn",o.innerHTML="⛶",o.title="Enlarge image",o.onclick=()=>y(imageUrl,t.alt),e.appendChild(t),e.appendChild(o),n.appendChild(e),document.querySelectorAll(".carousel-btn-panel").forEach((e=>{e.style.display="none"}))}}(e),document.querySelector(".carousel-btn-panel.prev").addEventListener("click",(()=>f(-1))),document.querySelector(".carousel-btn-panel.next").addEventListener("click",(()=>f(1)))}function f(e){const n=document.querySelectorAll(".carousel-images-panel .image-container");if(n.length<=1)return;let t=-1;n.forEach(((e,n)=>{const o=e.querySelector("img");o.classList.contains("active")&&(t=n,o.classList.remove("active"))})),-1!==t&&n[(t+e+n.length)%n.length].querySelector("img").classList.add("active")}function y(e,n){let t=document.getElementById("imageZoomOverlay");t||(t=function(){const e=document.createElement("div");return e.id="imageZoomOverlay",e.className="image-zoom-overlay",e.innerHTML='\n    <div class="zoom-container">\n      <div class="zoom-header">\n        <div class="zoom-controls">\n          <button class="zoom-btn-control" id="zoomOut">−</button>\n          <span class="zoom-level">100%</span>\n          <button class="zoom-btn-control" id="zoomIn">+</button>\n          <button class="zoom-btn-control" id="resetZoom">Reset</button>\n        </div>\n        <button class="zoom-close-btn">&times;</button>\n      </div>\n      <div class="zoom-instructions">\n        Use mouse wheel to zoom • Click and drag to pan • Pinch to zoom on mobile\n      </div>\n      <div class="zoom-image-container">\n        <img class="zoom-image" src="" alt="" />\n      </div>\n    </div>\n  ',document.body.appendChild(e),function(){if(document.getElementById("zoomStyles"))return;const e=document.createElement("style");e.id="zoomStyles",e.textContent="\n    .image-zoom-overlay {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.95);\n      display: none;\n      justify-content: center;\n      align-items: center;\n      z-index: 10000;\n      backdrop-filter: blur(5px);\n    }\n    \n    .zoom-container {\n      width: 95%;\n      height: 95%;\n      display: flex;\n      flex-direction: column;\n      background: #1a1a1a;\n      border-radius: 8px;\n      overflow: hidden;\n    }\n    \n    .zoom-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 15px 20px;\n      background: #2a2a2a;\n      border-bottom: 1px solid #444;\n    }\n    \n    .zoom-controls {\n      display: flex;\n      align-items: center;\n      gap: 10px;\n    }\n    \n    .zoom-btn-control {\n      background: #4a4a4a;\n      color: white;\n      border: none;\n      padding: 8px 12px;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 16px;\n      min-width: 40px;\n      transition: background 0.2s;\n    }\n    \n    .zoom-btn-control:hover {\n      background: #5a5a5a;\n    }\n    \n    .zoom-level {\n      color: white;\n      font-weight: bold;\n      min-width: 50px;\n      text-align: center;\n    }\n    \n    .zoom-close-btn {\n      background: #ff4444;\n      color: white;\n      border: none;\n      padding: 8px 15px;\n      border-radius: 50%;\n      cursor: pointer;\n      font-size: 20px;\n      font-weight: bold;\n    }\n    \n    .zoom-close-btn:hover {\n      background: #ff6666;\n    }\n    \n    .zoom-image-container {\n      flex: 1;\n      overflow: hidden;\n      position: relative;\n      cursor: grab;\n      background: #1a1a1a;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    \n    .zoom-image-container:active {\n      cursor: grabbing;\n    }\n    \n    .zoom-image {\n      max-width: 100%;\n      max-height: 100%;\n      transition: transform 0.1s ease-out;\n      user-select: none;\n      -webkit-user-drag: none;\n      object-fit: contain;\n    }\n    \n    /* Zoom button styles */\n    .zoom-btn {\n      position: absolute;\n      bottom: 8px;\n      right: 8px;\n      background: rgba(0, 0, 0, 0.7);\n      color: white;\n      border: none;\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      cursor: pointer;\n      font-size: 18px;\n      font-weight: bold;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      transition: all 0.2s ease;\n      z-index: 10;\n      backdrop-filter: blur(4px);\n    }\n    \n    .zoom-btn:hover {\n      background: rgba(0, 0, 0, 0.9);\n      transform: scale(1.1);\n    }\n    \n    .zoom-instructions {\n      padding: 10px 20px;\n      background: #2a2a2a;\n      color: #ccc;\n      text-align: center;\n      font-size: 14px;\n      border-top: 1px solid #444;\n    }\n    \n    @media (max-width: 768px) {\n      .zoom-container {\n        width: 100%;\n        height: 100%;\n        border-radius: 0;\n      }\n      \n      .zoom-controls {\n        gap: 5px;\n      }\n      \n      .zoom-btn-control {\n        padding: 6px 10px;\n        font-size: 14px;\n        min-width: 35px;\n      }\n      \n      .zoom-instructions {\n        font-size: 12px;\n        padding: 8px 15px;\n      }\n    }\n  ",document.head.appendChild(e)}(),function(e){e.querySelector(".zoom-close-btn").onclick=j,e.onclick=n=>{n.target===e&&j()},document.addEventListener("keydown",(n=>{"Escape"===n.key&&"flex"===e.style.display&&j()}))}(e),e}());const o=t.querySelector(".zoom-image"),a=t.querySelector(".zoom-image-container");o.src=e,o.alt=n,b(a,o),t.style.display="flex",document.body.style.overflow="hidden",o.onload=()=>{!function(e,n){let t=1,o=0,a=0,s=!1,i=0,l=0;document.getElementById("zoomIn").onclick=()=>{t=Math.min(1.2*t,5),p(),E(t)},document.getElementById("zoomOut").onclick=()=>{t=Math.max(t/1.2,.1),p(),E(t)},document.getElementById("resetZoom").onclick=()=>{b(e,n)},e.addEventListener("wheel",(n=>{n.preventDefault();const s=e.getBoundingClientRect(),i=n.clientX-s.left,l=n.clientY-s.top,c=n.deltaY>0?.9:1.1,r=Math.min(Math.max(t*c,.1),5),d=r-t;o-=(i-o)*d/t,a-=(l-a)*d/t,t=r,p(),E(t)})),e.addEventListener("mousedown",r),e.addEventListener("mousemove",d),e.addEventListener("mouseup",m),e.addEventListener("mouseleave",m),e.addEventListener("touchstart",(function(e){2===e.touches.length?c=u(e.touches):1===e.touches.length&&r({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}),{passive:!1}),e.addEventListener("touchmove",(function(e){if(e.preventDefault(),2===e.touches.length){const n=u(e.touches);if(c>0){const e=n/c;t=Math.min(Math.max(t*e,.1),5),p(),E(t)}c=n}else 1===e.touches.length&&s&&d({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,preventDefault:()=>{}})}),{passive:!1}),e.addEventListener("touchend",(function(){m(),c=0}));let c=0;function r(n){s=!0,i=n.clientX-o,l=n.clientY-a,e.style.cursor="grabbing"}function d(e){s&&(e.preventDefault(),o=e.clientX-i,a=e.clientY-l,p())}function m(){s=!1,e.style.cursor="grab"}function u(e){const n=e[0].clientX-e[1].clientX,t=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+t*t)}function p(){n.style.transform=`translate(${o}px, ${a}px) scale(${t})`}e._resetZoom=()=>{b(e,n)},e._updateScale=e=>{t=e}}(a,o),b(a,o)}}function b(e,n){e.getBoundingClientRect(),n.getBoundingClientRect();const t=n.naturalWidth,o=n.naturalHeight,a=Math.min(t,o,1);n.style.transform=`translate(0px, 0px) scale(${a})`,e._updateScale&&e._updateScale(a),E(a)}function E(e){const n=document.querySelector(".zoom-level");n&&(n.textContent=Math.round(100*e)+"%")}function j(){const e=document.getElementById("imageZoomOverlay");e&&(e.style.display="none",document.body.style.overflow="")}function x(){document.querySelectorAll(".event-card").forEach((e=>{e.addEventListener("click",(()=>{document.querySelectorAll(".event-card").forEach((e=>e.classList.remove("active"))),e.classList.add("active");const n=e.dataset.eventId,t=l.find((e=>(e.id||u(e.title))===n));t&&(v(t),console.log(t))}))}))}function k(e,n){0!==e.length&&e.forEach((e=>{const t=document.createElement("div");t.classList.add("event-card-overview"),t.style.borderBottom=`4px solid ${e.color}`,t.dataset.eventId=e.id;const o=document.createElement("div");o.classList.add("event-image-overview");const a=document.createElement("img");a.classList.add("event-modal-card-img-overview"),a.src=e.image,a.alt=e.title,o.appendChild(a),t.appendChild(o);const s=document.createElement("div");s.classList.add("event-badge-overview");let i=function(e){let n=e||"EVENT";return n.toUpperCase().includes("DAY")?"DAYS OF":n.toUpperCase().includes("SEASONS")?"SEASON":n.toUpperCase().includes("TRAVELLING-SPIRITS")?"TS":n.toUpperCase().includes("SPECIAL-EVENT")?"SPECIAL":n.toUpperCase()}(e.category);s.textContent=i,t.appendChild(s);const l=document.createElement("div");l.classList.add("event-content-overview");const c=document.createElement("h3");c.classList.add("event-title-overview"),c.textContent=e.title.replace(/^[\p{Emoji}\p{Extended_Pictographic}]+\s*/u,""),l.appendChild(c);const r=document.createElement("p");r.classList.add("event-date-overview");const d=new Date(e.start),m=new Date(e.end),u=d.toLocaleDateString("en-US",{month:"short",day:"2-digit"}),p=m.toLocaleDateString("en-US",{month:"short",day:"2-digit"});r.textContent=`${u} - ${p}`,l.appendChild(r);const g=document.createElement("p");g.classList.add("event-countdown-overview");const h=`countdown-${e.title.replace(/ /g,"_")}`;g.id=h;const v=e.start?e.start-new Date:0,f=v<=0?"Starts: Ongoing":"Starts in: ";setTimeout((()=>{w(h,e.start,f),v<=0&&w(h,e.end,"Ends in: ")}),0),t.addEventListener("click",(function(){C({title:e.title,start:new Date(e.start),end:new Date(e.end),extendedProps:{credits:e.credits,description:e.description,blogUrl:e.blogUrl,images:e.images}})})),l.appendChild(g),t.appendChild(l),n.appendChild(t)}))}function w(e,n,t){if(!n)return;const o=document.getElementById(e);let a=setInterval((function(){const e=n.getTime()-(new Date).getTime();if(e<=0)return clearInterval(a),void(o.textContent=`${t}Ongoing`);const s=Math.floor(e/864e5),i=Math.floor(e%864e5/36e5),l=Math.floor(e%36e5/6e4);let c="";s>0&&(c+=`${s}d `),i>0&&(c+=`${i}h `),l>0&&(c+=`${l}m `),c+=`${Math.floor(e%6e4/1e3)}s`,o.textContent=`${t}${c}`}),1e3)}function C(e){const n=document.getElementById("eventModal"),t=document.getElementById("modalTitle"),o=document.getElementById("modalStart"),a=document.getElementById("modalDescription"),s=document.getElementById("modalCta"),i=document.getElementById("modalGoogleCalendar"),l=document.querySelector(".carousel-images"),c=document.querySelector(".credits-list");let r,d;r=S(e.start),d=S(e.end),l.innerHTML="",c.textContent=e.extendedProps.credits?"Credits: "+e.extendedProps.credits:"Credits: We're working on gathering information for you. Check back soon!";const m=e.title.replace(/^[\p{Emoji}\p{Extended_Pictographic}]+\s*/u,"");t.textContent=m,o.textContent=r+" - "+d,a.innerHTML=e.extendedProps.description||"The story behind this event is still unfolding...";const u=function(e){let n=e.extendedProps.description||"Join us in Sky!";n.length>300&&(n=n.slice(0,300)+"..."),n=encodeURIComponent(n);const t=encodeURIComponent(e.title||"Sky Event"),o=encodeURIComponent("Sky: Children of the Light");return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${t}&dates=${new Date(e.start).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}/${new Date(e.end).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}&details=${n}&location=${o}`}(e);i.href=u,i.target="_blank",i.rel="noopener noreferrer",i.textContent="Add to Google Calendar",i.classList.add("calendar-link-btn"),e.extendedProps.blogUrl?(s.target="_blank",s.textContent="Read More",s.href=e.extendedProps.blogUrl,s.style.display="inline-block"):s.style.display="none",function(e){const n=document.querySelector(".carousel-images");if(e.extendedProps.images){const t=e.extendedProps.images.includes(",")?e.extendedProps.images.split(/,|\|/).map((e=>e.trim())):[e.extendedProps.images];t.forEach(((t,o)=>{const a=document.createElement("div");a.className="image-container";const s=document.createElement("img");s.src=t,s.alt=`${e.title} image ${o+1}`,s.className=0===o?"active":"";const i=document.createElement("button");i.className="zoom-btn",i.innerHTML="⛶",i.title="Enlarge image",i.onclick=()=>y(t,s.alt),a.appendChild(s),a.appendChild(i),n.appendChild(a)})),document.querySelectorAll(".carousel-btn").forEach((e=>{e.style.display=t.length>1?"block":"none"}))}else{const e=document.createElement("div");e.className="image-container";const t=document.createElement("img");t.src="https://ik.imagekit.io/e3wiv79bq/Sky:%20Cotl/not%20available?updatedAt=1744181831782",t.alt="Event placeholder image",t.className="active";const o=document.createElement("button");o.className="zoom-btn",o.innerHTML="⛶",o.title="Enlarge image",o.onclick=()=>y(imageUrl,t.alt),e.appendChild(t),e.appendChild(o),n.appendChild(e),document.querySelectorAll(".carousel-btn").forEach((e=>{e.style.display="none"}))}}(e),n.style.display="block"}function S(e,n){const t=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(e);return Intl.DateTimeFormat().resolvedOptions().timeZone,`${t}`}function z(e){const n=document.querySelectorAll(".carousel-images img");if(n.length<=1)return;let t=-1;n.forEach(((e,n)=>{e.classList.contains("active")&&(t=n,e.classList.remove("active"))})),-1!==t&&n[(t+e+n.length)%n.length].classList.add("active")}function M(e,n,t,o,a){const s=document.createElement("div");return s.className=`event-notice ${n}`,s.innerHTML=`\n      <div class="notice-icon">\n        <img src="${t}" alt="${n} event icon">\n      </div>\n      <div class="notice-text">\n        <p><strong>${o}</strong> <u>${e.title}</u> ${a}</p>\n      </div>\n    `,s}Promise.all([(0,a.GG)((0,a.P)(i,(0,a.My)("start","asc")))]).then((([e])=>{const n=[],o=t(5093);t(4743);const a=o.tz.guess();e.docs.forEach((e=>{const t=e.data().start,s=e.data().end,i=e.data().startTime;let l,c;if(i){l=o.tz(`${t} ${i}`,"YYYY-MM-DD HH:mm","America/Los_Angeles");const n=e.data().endTime;c=n?o.tz(`${s} ${n}`,"YYYY-MM-DD HH:mm","America/Los_Angeles"):l.clone().add(1,"hour")}else l=o.tz(t,"America/Los_Angeles").startOf("day"),c=o.tz(s,"YYYY-MM-DD","America/Los_Angeles").endOf("day");const r=l.clone().tz(a),d=c.clone().tz(a),m=e.id||u(e.data().title);n.push({id:m,title:e.data().title,start:r.toDate(),end:d.toDate(),allDay:i,color:e.data().color,description:e.data().description,images:e.data().images,blogUrl:e.data().blogUrl,image:e.data().image,credits:e.data().credits,category:e.data().category||"Default Category"})})),function(e){const n=document.getElementById("calendar"),t=new FullCalendar.Calendar(n,{initialView:"dayGridMonth",fixedWeekCount:!1,aspectRatio:1.35,height:"auto",events:e,eventContent:function(e){const n=e.event.extendedProps.icon;return n?{html:`\n            <div class="event-icon-container">\n              <img src="${n}" class="event-icon" alt="event icon" />\n            </div>\n          `}:{html:`\n            <div class="event-content">\n              <span class="fc-event-title">${e.event.title}</span>\n            </div>\n          `}},eventOrder:"start",eventClick:function(e){C(e.event)},headerToolbar:{right:"prev,next today"}});t.render(),function(e,n){const t=document.createElement("select");t.id="category-filter",t.title="category-filter",t.innerHTML='\n    <option value="">All Categories</option>\n    <option value="special-event">Special Events</option>\n    <option value="shard">Shard</option>\n    <option value="days-of-events">Days of Events</option>\n    <option value="travelling-spirits">Travelling Spirits</option>\n    <option value="seasons">Seasons</option>\n    <option value="hide">Hide Shards</option>\n  ',document.querySelector(".fc-toolbar-chunk:nth-child(2)").appendChild(t),t.addEventListener("change",(function(){const t=this.value.toLowerCase(),o=n.filter((e=>"hide"===t?!e.category||!e.category.toLowerCase().includes("shard"):e.category&&e.category.toLowerCase()===t||""===t));e.removeAllEventSources(),e.addEventSource(o)}))}(t,e),console.log(e)}(n),function(e){const n=document.querySelector(".info-container");n.innerHTML="";const t=document.createElement("div");t.innerHTML="<h2>Heads Up!</h2>",n.appendChild(t);const o=new Date,a=[],s=[];if(e.forEach((e=>{const n=new Date(e.start),t=new Date(e.end),i=Math.ceil((n-o)/864e5),l=Math.ceil((t-o)/864e5);i>0&&i<=4&&(e.daysUntil=i,a.push(e)),o>=n&&l>0&&l<=4&&(e.daysUntil=l,s.push(e))})),a.sort(((e,n)=>e.daysUntil-n.daysUntil)),s.sort(((e,n)=>e.daysUntil-n.daysUntil)),a.length>0)a.slice(0,2).forEach((e=>{const t=M(e,"upcoming","https://img.icons8.com/?size=100&id=FhnRPWu7HD5f&format=png&color=000000","Coming Soon:",`begins in ${e.daysUntil} day${e.daysUntil>1?"s":""}!`);n.appendChild(t)}));else if(0===a.length&&0===s.length){const e=function(e){const n=document.createElement("div");return n.className=`event-notice ${e}`,n.innerHTML=`\n      <div class="notice-icon">\n        <img src="https://img.icons8.com/?size=100&id=3ovMFy5JDSWq&format=png&color=000000" alt="${e} event icon">\n      </div>\n      <div class="notice-text">\n        <p>Relax! No events are starting or ending within the next 4 days.</p>\n      </div>\n    `,n}("upcoming");n.appendChild(e)}if(s.length>0&&s.slice(0,2).forEach((e=>{const t=M(e,"ending","https://img.icons8.com/?size=100&id=Sd2tYsgMJNyn&format=png&color=000000","Last Chance:",`ends in ${e.daysUntil} day${e.daysUntil>1?"s":""}!`);n.appendChild(t)})),0===a.length&&0===s.length){const e=document.querySelector(".heads-up");e&&(e.style.display="none")}}(n),function(e){const n=document.querySelector(".event-cards-overview");n.innerHTML="";const t=new Date,o=[],a=[];e.forEach((e=>{const n=new Date(e.start),s=new Date(e.end);t>=n&&t<=s?o.push(e):t<n&&t<s&&a.push(e)})),k(o,n),k(a,n)}(n)})).catch((e=>{console.error("Error getting documents: ",e)})),document.addEventListener("DOMContentLoaded",(function(){setTimeout((function(){document.querySelector(".overlay").style.opacity=0,setTimeout((function(){document.querySelector(".overlay").style.display="none"}),2500)}),2500);var e=document.getElementById("game-modal"),n=document.getElementById("open-game-modal"),t=document.getElementsByClassName("close")[0];n.onclick=function(){e.style.display="block"},t.onclick=function(){e.style.display="none"},window.onclick=function(n){n.target==e&&(e.style.display="none")};const o=document.querySelectorAll(".tab"),s=document.querySelectorAll(".tab-pane");o.forEach((e=>{e.addEventListener("click",(()=>{o.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),s.forEach((e=>e.style.display="none"));const n=e.dataset.tab;document.getElementById(n).style.display="block",l.length>0&&h()}))})),document.getElementById("prev-month").addEventListener("click",(()=>{r>0&&(r--,p(),g())})),document.getElementById("next-month").addEventListener("click",(()=>{r<d.length-1&&(r++,p(),g())})),Promise.all([(0,a.GG)((0,a.P)(i,(0,a.My)("start","asc")))]).then((([e])=>{l=[];const n=moment.tz.guess();e.docs.forEach((e=>{const t=e.data().start,o=e.data().end,a=e.data().startTime;let s,i;if(a){s=moment.tz(`${t} ${a}`,"YYYY-MM-DD HH:mm","America/Los_Angeles");const n=e.data().endTime;i=n?moment.tz(`${o} ${n}`,"YYYY-MM-DD HH:mm","America/Los_Angeles"):s.clone().add(1,"hour")}else s=moment.tz(t,"America/Los_Angeles").startOf("day"),i=moment.tz(o,"YYYY-MM-DD","America/Los_Angeles").endOf("day");const c=s.clone().tz(n),r=i.clone().tz(n),d=e.id||u(e.data().title);l.push({id:d,title:e.data().title,start:c.toDate(),end:r.toDate(),allDay:a,color:e.data().color,description:e.data().description,images:e.data().images,blogUrl:e.data().blogUrl,image:e.data().image,credits:e.data().credits,category:e.data().category||"Default Category"})})),h(),l.length>0&&(v(l[0]),setTimeout((()=>{const e=document.querySelector(".event-card");e&&(e.classList.add("active"),document.querySelector(".preview-panel").innerHTML='<div class="loading">Select an event to view details</div>')}),0))})).catch((e=>{console.error("Error getting documents: ",e);const n='<div class="no-events">Error loading events. Please try again later.</div>';document.getElementById("all-events-content").innerHTML=n,document.getElementById("in-progress-content").innerHTML=n,document.getElementById("upcoming-content").innerHTML=n})),s.forEach((e=>{e.id===document.querySelector(".tab.active").dataset.tab?e.style.display="block":e.style.display="none"})),document.body.insertAdjacentHTML("beforeend",'<div id="eventModal" class="modal">\n    <div class="modal-content">\n      <span class="close-modal">&times;</span>\n      \x3c!-- Image Carousel --\x3e\n      <div class="carousel">\n        <div class="carousel-images"></div>\n        <button class="carousel-btn prev">❮</button>\n        <button class="carousel-btn next">❯</button>\n      </div>\n\n      <div class="credits-section">\n        <span class="credits-list">Credits: </span>\n      </div>\n\n      <h2 id="modalTitle"></h2>\n      <div id="modalDates">\n        <p id="modalStart"></p>\n        <p id="modalEnd"></p>\n      </div>\n      <div id="modalDescription"></div>\n      <div class="modal-cta-container">\n        <a id="modalGoogleCalendar" class="cta-btn calendar-link-btn" title="Add to Google Calendar">\n          Add to Google Calendar\n        </a>\n        <a id="modalCta" class="cta-btn" title="Sky Blog">\n          Sky Blog\n        </a>\n      </div>\n    </div>\n    </div>'),document.querySelector(".carousel-btn.prev").addEventListener("click",(function(){z(-1)})),document.querySelector(".carousel-btn.next").addEventListener("click",(function(){z(1)})),document.querySelector(".close-modal").addEventListener("click",(function(e){document.getElementById("eventModal").style.display="none"})),window.addEventListener("click",(function(e){const n=document.getElementById("eventModal");e.target===n&&(n.style.display="none")})),document.head.insertAdjacentHTML("beforeend","\n      <style>\n      .modal {\n        display: none;\n        position: fixed;\n        z-index: 1000;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0,0,0,0.7);\n        overflow-y: scroll;\n        color: var(--dark-text);\n      }\n\n      .modal-content {\n        background-color: white;\n        margin: auto;\n        padding: 20px;\n        width: 80%;\n        max-width: 600px;\n        border-radius: 8px;\n        position: relative;\n        margin-top: 5%;\n      }\n\n      #modalDates {\n        margin-bottom: 10px;\n      }\n\n      #modalDates p{\n        font-size: 14px;\n      }\n\n      .close-modal {\n        position: absolute;\n        top: 10px;\n        right: 15px;\n        font-size: 24px;\n        font-weight: bold;\n        cursor: pointer;\n        z-index: 1000;\n      }\n\n      .credits-section {\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-start;\n        align-items: center;\n      }\n\n      .camera-icon {\n        width: 20px;\n        height: 20px;\n      }\n\n      .credits-list{\n        font-size: 12px;\n      }\n\n      .carousel {\n        position: relative;\n        width: 100%;\n        margin-bottom: 20px;\n      }\n\n      .carousel-images {\n        display: flex;\n        overflow: hidden;\n        width: 100%;\n        height: auto;\n        border-radius: 4px;\n      }\n\n      .carousel-images img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n        display: none;\n      }\n\n      .carousel-images img.active {\n        display: block;\n      }\n\n      .carousel-btn {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        background: rgba(0,0,0,0.5);\n        color: white;\n        border: none;\n        border-radius: 50%;\n        width: 40px;\n        height: 40px;\n        font-size: 18px;\n        cursor: pointer;\n      }\n\n      .carousel-btn.prev {\n        left: 10px;\n      }\n\n      .carousel-btn.next {\n        right: 10px;\n      }\n\n      #modalTitle {\n        margin-top: 15px;\n        margin-bottom: 10px;\n        font-size: 24px;\n      }\n\n      #modalDescription {\n        margin-bottom: 20px;\n        text-align: justify;\n        font-size: 16px;\n        line-height: 1.5;\n      }\n\n      .cta-btn {\n        display: inline-block;\n        padding: 10px 20px;\n        background-color: var(--secondary-color);\n        color: white;\n        text-decoration: none;\n        border-radius: 4px;\n        font-weight: bold;\n        z-index: 1000;\n        cursor: pointer;\n        width: 100%;\n        text-align: center;\n      }\n\n      .cta-btn:hover {\n        background: #3367d6;\n      }\n\n      .modal-cta-container {\n        display: flex;\n        gap: 1rem;\n        margin-top: 1rem;\n        width: 100%;\n      }\n\n      .modal-cta-container .cta-btn {\n        flex: 1;\n        width: auto;\n        text-align: center;\n      }\n\n      .calendar-link-btn {\n        background: #4285F4;\n      }\n\n      .calendar-link-btn:hover {\n        background: #3367d6;\n      }\n\n      </style>\n    ")}))}},t={};function o(e){var a=t[e];if(void 0!==a)return a.exports;var s=t[e]={id:e,loaded:!1,exports:{}};return n[e].call(s.exports,s,s.exports,o),s.loaded=!0,s.exports}o.m=n,e=[],o.O=(n,t,a,s)=>{if(!t){var i=1/0;for(d=0;d<e.length;d++){for(var[t,a,s]=e[d],l=!0,c=0;c<t.length;c++)(!1&s||i>=s)&&Object.keys(o.O).every((e=>o.O[e](t[c])))?t.splice(c--,1):(l=!1,s<i&&(i=s));if(l){e.splice(d--,1);var r=a();void 0!==r&&(n=r)}}return n}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[t,a,s]},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={57:0};o.O.j=n=>0===e[n];var n=(n,t)=>{var a,s,[i,l,c]=t,r=0;if(i.some((n=>0!==e[n]))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(c)var d=c(o)}for(n&&n(t);r<i.length;r++)s=i[r],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},t=self.webpackChunkthat_sky_calendar=self.webpackChunkthat_sky_calendar||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var a=o.O(void 0,[826],(()=>o(44)));a=o.O(a)})();